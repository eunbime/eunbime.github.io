---
title: 이미지 최적화 방법
date: 2025-02-01 08:25:00 +09:00
categories: [프론트엔드, Next.js]
tags: [Next.js, Image]
---

이미지 최적화는 웹 성능 최적화에서 중요한 요소 중 하나이다.

특히 **로딩 속도**와 **SEO 성능**에 큰 영향을 미치므로, 적절한 최적화 기법을 적용하는 것이 중요하다.

이번 글에서는 **이미지 최적화를 위한 주요 기법과 실제 프로젝트에서 적용한 방법**을 정리한다.

---

## **1. 이미지 포맷 최적화**

📌 **효율적인 이미지 포맷 선택은 로딩 속도를 단축하는 핵심 요소**

- 기존 포맷(JPG, PNG)은 파일 크기가 크고 압축률이 낮음
- **WebP, AVIF** 같은 최신 포맷은 압축률이 뛰어나고 품질이 우수함

✅ **최적화 방법**

- **WebP 포맷 사용**: JPG, PNG보다 최대 **30~50%** 작은 파일 크기 제공
- **Next.js의 `next/image` 컴포넌트 사용**: 자동으로 최적화된 포맷 변환 지원
- **Fallback 이미지 제공**: WebP 미지원 브라우저 대비

💡 **Next.js `next/image`를 사용한 포맷 최적화 예제**

```tsx
import Image from "next/image";

const OptimizedImage = () => {
  return (
    <Image
      src="/example.jpg"
      alt="최적화된 이미지"
      width={800}
      height={600}
      quality={80}
      formats={["image/webp"]} // 자동 변환
    />
  );
};

export default OptimizedImage;
```

✔️ `next/image`는 자동으로 **이미지 포맷 변환, 압축, 리사이징**을 수행

✔️ `quality={80}`로 설정하여 **품질을 유지하면서 파일 크기 감소**

---

## **2. 지연 로딩 (Lazy Loading) 적용**

📌 **모든 이미지를 한꺼번에 로드하면 초기 로딩 속도가 느려짐**

- 사용자가 보지 않는 이미지까지 미리 로드하면 불필요한 리소스 낭비 발생
- 지연 로딩(Lazy Loading)을 적용하여 **화면에 나타날 때만 로드**

✅ **최적화 방법**

- **HTML의 `loading="lazy"` 속성 사용**
- **Intersection Observer API를 활용한 커스텀 Lazy Loading**
- **Next.js의 `next/image`를 사용하면 기본적으로 Lazy Loading 적용**

💡 **HTML의 `loading="lazy"` 속성을 활용한 기본 Lazy Loading**

```html
<img src="example.jpg" alt="지연 로딩 이미지" loading="lazy" />
```

💡 **Next.js `next/image`를 사용한 Lazy Loading**

```tsx
import Image from "next/image";

const LazyLoadedImage = () => {
  return (
    <Image
      src="/example.jpg"
      alt="Lazy Loading 적용"
      width={800}
      height={600}
      loading="lazy"
    />
  );
};

export default LazyLoadedImage;
```

✔️ `next/image`는 **기본적으로 Lazy Loading이 적용**되어 불필요한 네트워크 요청 방지

✔️ `loading="lazy"` 속성으로 **화면에 나타날 때만 이미지 로드**

💡 **Intersection Observer를 활용한 커스텀 Lazy Loading 예제**

```tsx
import { useState, useEffect, useRef } from "react";

const LazyImage = ({ src, alt }) => {
  const [isVisible, setIsVisible] = useState(false);
  const imgRef = useRef(null);

  useEffect(() => {
    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setIsVisible(true);
          observer.disconnect();
        }
      },
      { threshold: 0.1 }
    );

    if (imgRef.current) observer.observe(imgRef.current);

    return () => observer.disconnect();
  }, []);

  return (
    <img
      ref={imgRef}
      src={isVisible ? src : ""}
      alt={alt}
      width="800"
      height="600"
    />
  );
};

export default LazyImage;
```

✔️ **Intersection Observer를 사용하면 스크롤 이벤트보다 성능이 우수**

✔️ 이미지가 뷰포트에 진입할 때만 `src`를 설정하여 로딩

---

## **3. 적절한 이미지 크기 제공 (반응형 이미지)**

📌 **모든 기기에서 동일한 크기의 이미지를 로드하면 비효율적**

- 작은 화면에서는 불필요하게 큰 이미지를 불러와 네트워크 낭비
- 반응형 기기에 맞는 적절한 크기의 이미지를 제공해야 함

✅ **최적화 방법**

- **`srcset`과 `sizes` 속성 활용**
- **CDN을 사용하여 동적 이미지 리사이징**
- **Next.js `next/image`의 `sizes` 속성 활용**

💡 **HTML의 `srcset`과 `sizes` 속성을 활용한 반응형 이미지**

```html
<img
  src="example-large.jpg"
  srcset="
    example-small.jpg   480w,
    example-medium.jpg 1024w,
    example-large.jpg  1600w
  "
  sizes="(max-width: 600px) 480px, (max-width: 1200px) 1024px, 1600px"
  alt="반응형 이미지"
/>
```

✔️ **기기의 화면 크기에 맞춰 적절한 이미지 크기 로드**

✔️ 네트워크 최적화 및 로딩 속도 개선

💡 **Next.js `next/image`의 `sizes` 속성을 활용한 반응형 이미지 최적화**

```tsx
import Image from "next/image";

const ResponsiveImage = () => {
  return (
    <Image
      src="/example.jpg"
      alt="반응형 이미지"
      width={1600}
      height={900}
      sizes="(max-width: 600px) 480px, (max-width: 1200px) 1024px, 1600px"
    />
  );
};

export default ResponsiveImage;
```

✔️ `sizes` 속성을 설정하면 **화면 크기에 맞는 최적화된 이미지 로드**

✔️ **CDN을 활용하면 동적 이미지 리사이징을 적용할 수도 있음**

---

## **4. 이미지 압축 및 CDN 활용**

📌 **최적화되지 않은 원본 이미지를 사용하면 네트워크 비용 증가**

- 무압축 원본 이미지는 용량이 커서 **전송 속도가 느려짐**
- CDN(Content Delivery Network)을 활용하면 **전 세계 어디서든 빠르게 로딩 가능**

✅ **최적화 방법**

- **이미지 압축 도구 사용 (TinyPNG, Squoosh, ImageOptim)**
- **CDN을 활용한 이미지 제공 (Cloudflare, AWS S3, Vercel, Firebase)**
- **Next.js의 `next/image`를 사용하면 자동으로 최적화된 이미지 제공**

💡 **Cloudinary를 활용한 동적 이미지 최적화**

```html
<img
  src="https://res.cloudinary.com/demo/image/upload/w_800,h_600,q_auto/example.jpg"
/>
```

✔️ **이미지 크기(`w_800,h_600`), 품질(`q_auto`)을 자동으로 조절**

✔️ **CDN을 통해 전 세계 어디서든 빠르게 이미지 제공**

---

## **🔹 결론**

웹 애플리케이션에서 **이미지 최적화는 성능 개선에 중요한 역할**을 한다.

✔️ **WebP, AVIF 같은 최신 포맷 사용하여 파일 크기 절감**

✔️ **Lazy Loading 적용하여 불필요한 네트워크 요청 방지**

✔️ **반응형 이미지(`srcset`, `sizes`) 활용하여 적절한 크기 로드**

✔️ **CDN을 활용하여 글로벌 네트워크 속도 최적화**

💡 **이러한 방법들을 조합하여 이미지 로딩 속도를 개선하고, 사용자 경험을 최적화할 수 있다.** 🚀

---
title: React Hooks 사용 규칙
date: 2025-01-31 10:00:00 +09:00
categories: [프론트엔드, React]
tags: [React]
---

# React Hook 사용 규칙

React Hook을 사용할 때는 반드시 지켜야 할 규칙들이 있다. 이러한 규칙들을 이해하고 올바르게 적용하는 방법을 알아보자.

## 1. 최상위 레벨에서만 Hook 호출하기

### 잘못된 예시:

```jsx
function BadComponent() {
  const [count, setCount] = useState(0);

  if (count > 0) {
    // ❌ 조건문 안에서 Hook 사용
    const [data, setData] = useState(null);
  }

  function handleClick() {
    // ❌ 함수 내부에서 Hook 사용
    useEffect(() => {
      console.log(count);
    });
  }

  return <div>{count}</div>;
}
```

### 올바른 예시:

```jsx
function GoodComponent() {
  const [count, setCount] = useState(0);
  const [data, setData] = useState(null);

  useEffect(() => {
    if (count > 0) {
      // ✅ 조건문은 Hook 내부에서 사용
      fetchData();
    }
  }, [count]);

  const handleClick = () => {
    setCount(count + 1);
  };

  return <div>{count}</div>;
}
```

## 2. React 함수형 컴포넌트 또는 커스텀 Hook에서만 사용

### 잘못된 예시:

```jsx
// ❌ 일반 함수에서 Hook 사용
function updateData() {
  const [data, setData] = useState(null);
  // ...
}

// ❌ 클래스 컴포넌트 메서드에서 Hook 사용
class ClassComponent extends React.Component {
  updateValue() {
    const [value, setValue] = useState(0);
  }
}
```

### 올바른 예시:

```jsx
// ✅ 함수형 컴포넌트에서 Hook 사용
function FunctionalComponent() {
  const [data, setData] = useState(null);
  return <div>{data}</div>;
}

// ✅ 커스텀 Hook에서 Hook 사용
function useCustomHook() {
  const [value, setValue] = useState(0);

  useEffect(() => {
    // ...
  }, [value]);

  return value;
}
```

## 3. ESLint 설정

Hook 규칙을 자동으로 체크하기 위한 ESLint 설정:

```json
{
  "plugins": ["react-hooks"],
  "rules": {
    "react-hooks/rules-of-hooks": "error",
    "react-hooks/exhaustive-deps": "warn"
  }
}
```

## 4. 실제 활용 예시

### 조건부 효과를 다루는 올바른 방법:

```jsx
function ConditionalExample() {
  const [isOnline, setIsOnline] = useState(false);
  const [count, setCount] = useState(0);

  // ✅ Hook은 최상위에서 호출하고, 조건은 내부에서 처리
  useEffect(() => {
    if (isOnline) {
      const connection = createConnection();
      connection.connect();

      return () => connection.disconnect();
    }
  }, [isOnline]);

  // ✅ 여러 개의 Hook을 사용할 때도 최상위에서 호출
  useEffect(() => {
    document.title = `카운트: ${count}`;
  }, [count]);

  return (
    <div>
      <button onClick={() => setIsOnline(!isOnline)}>
        {isOnline ? "오프라인으로" : "온라인으로"}
      </button>
      <button onClick={() => setCount((c) => c + 1)}>증가</button>
    </div>
  );
}
```

## 주의해야 할 패턴들

### 1. 반복문에서의 Hook 사용

```jsx
// ❌ 잘못된 예시
function BadLoopExample() {
  const items = ["a", "b", "c"];

  items.forEach((item) => {
    const [state, setState] = useState(null); // 허용되지 않음
  });
}

// ✅ 올바른 예시
function GoodLoopExample() {
  const items = ["a", "b", "c"];
  const [states, setStates] = useState(items.map(() => null));

  return (
    <div>
      {items.map((item, index) => (
        <div key={item}>{states[index]}</div>
      ))}
    </div>
  );
}
```

## 결론

Hook 규칙을 준수하는 것은 React 애플리케이션의 안정성과 예측 가능성을 보장하는 데 매우 중요하다. ESLint 규칙을 활용하고, 컴포넌트를 설계할 때 이러한 규칙들을 항상 염두에 두어야 한다.
